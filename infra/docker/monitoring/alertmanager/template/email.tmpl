{{ define "email.default.subject" }}[{{ .Status | toUpper }}] {{ range .Alerts.Firing }}{{ .Labels.alertname }}{{ end }}{{ end }}

{{ define "email.default.html" }}
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Alert: {{ range .Alerts.Firing }}{{ .Labels.alertname }}{{ end }}</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    .alert {
      margin-bottom: 20px;
      padding: 15px;
      border-radius: 4px;
    }
    .firing {
      background-color: #ffebee;
      border-left: 5px solid #f44336;
    }
    .resolved {
      background-color: #e8f5e9;
      border-left: 5px solid #4caf50;
    }
    h3 {
      margin-top: 0;
      color: #333;
    }
    .details {
      margin: 5px 0;
    }
    .time {
      color: #888;
      font-size: 0.8em;
    }
  </style>
</head>
<body>
  <h2>PrestaShop Infrastructure Alert</h2>
  
  {{ if .Alerts.Firing }}
  <h3>ðŸ”´ Firing Alerts ({{ len .Alerts.Firing }})</h3>
  {{ range .Alerts.Firing }}
  <div class="alert firing">
    <h3>{{ .Labels.alertname }}</h3>
    <div class="details"><strong>Description:</strong> {{ .Annotations.description }}</div>
    <div class="details"><strong>Instance:</strong> {{ .Labels.instance }}</div>
    <div class="details"><strong>Job:</strong> {{ .Labels.job }}</div>
    <div class="details"><strong>Severity:</strong> {{ .Labels.severity }}</div>
    <div class="time">Started: {{ .StartsAt.Format "2006-01-02 15:04:05" }}</div>
  </div>
  {{ end }}
  {{ end }}

  {{ if .Alerts.Resolved }}
  <h3>âœ… Resolved Alerts ({{ len .Alerts.Resolved }})</h3>
  {{ range .Alerts.Resolved }}
  <div class="alert resolved">
    <h3>{{ .Labels.alertname }}</h3>
    <div class="details"><strong>Description:</strong> {{ .Annotations.description }}</div>
    <div class="details"><strong>Instance:</strong> {{ .Labels.instance }}</div>
    <div class="details"><strong>Job:</strong> {{ .Labels.job }}</div>
    <div class="details"><strong>Severity:</strong> {{ .Labels.severity }}</div>
    <div class="time">Resolved: {{ .EndsAt.Format "2006-01-02 15:04:05" }}</div>
  </div>
  {{ end }}
  {{ end }}

  <p>View all alerts in <a href="https://alertmanager.ps.localhost">Alertmanager</a></p>
</body>
</html>
{{ end }} 